<!--
 * @file sfImageSanitizer.html
 * @description sfImageSanitizer 애플리케이션의 메인 HTML 파일입니다.
 *
 * 이 파일은 웹 애플리케이션의 가장 기본적인 진입점(Entry Point)이자 전체 구조를 정의하는 뼈대입니다.
 * 역할은 크게 세 가지로 나뉩니다:
 * 1. 구조 정의: 애플리케이션의 UI가 그려질 컨테이너(div)들을 배치합니다.
 * 2. 리소스 로딩: 애플리케이션에 필요한 모든 CSS와 JavaScript 파일을 '의존성 순서'에 맞게 불러옵니다.
 * 3. 부트스트래핑(Bootstrapping): 모든 리소스가 로드된 후, JavaScript 클래스들을 인스턴스화하고
 *    서로 연결(의존성 주입)하여 애플리케이션을 최종적으로 실행시킵니다.
-->
<!DOCTYPE html>
<!-- HTML5 문서 유형임을 브라우저에 알리는 선언문입니다. -->
<html lang="ko">
<!-- HTML 문서의 루트(root) 요소입니다. 'lang="ko"' 속성은 이 문서의 주 언어가 한국어임을 명시합니다. -->
<head>
    <!-- <head> 태그는 문서의 메타데이터(문서 자체에 대한 정보)를 담는 영역입니다. -->
    
    <meta charset="UTF-8">
    <!-- 문자 인코딩을 UTF-8로 설정하여 한글 깨짐을 방지합니다. -->
         
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 모바일 기기에서의 화면 표시 방법을 정의하는 뷰포트 설정으로, 반응형 웹의 핵심입니다. -->
         
    <title>sfImageSanitizer</title>
    <!-- 웹 브라우저의 탭에 표시될 문서의 제목입니다. -->

    <!-- ==========================================================================
       외부 리소스(폰트 및 스타일시트) 로드
       ========================================================================== -->
    
    <!-- 1. D2Coding 코딩 폰트: Hex 뷰의 가독성을 높여줍니다. -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/wan2land/d2coding/d2coding-full.css" />
    
    <!-- 2. Google Material Icons 폰트: UI에 사용되는 아이콘들을 제공합니다. -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    <!-- 3. 메인 CSS 스타일 시트: 이 애플리케이션의 모든 시각적 디자인을 정의합니다. -->
    <link rel="stylesheet" href="sfImageSanitizer.css">
</head>
<body>
    <!-- <body> 태그는 사용자에게 실제로 보여지는 모든 콘텐츠를 담는 영역입니다. -->

    <!-- 1. 메인 드래그 앤 드롭 애플리케이션 컨테이너 (마운트 포인트 #1) -->
    <!-- sfImageSanitizerUI.js가 이 div 내부에 드롭존 UI를 동적으로 생성합니다. -->
    <div id="sfImageSanitizer-container"></div>

    <!-- 2. 툴바 UI가 생성될 전용 컨테이너 (마운트 포인트 #2) -->
    <!-- sfImageSanitizerToolbar.js가 이 div 내부에 설정 옵션들을 동적으로 생성합니다. -->
    <div id="sfImageSanitizer-toolbar-container"></div>

    <!-- 3. 분석 결과 카드들이 표시될 컨테이너 (마운트 포인트 #3) -->
    <!-- sfImageSanitizerUI.js가 파일 분석 시 이 div 내부에 결과 카드들을 추가합니다. -->
    <div id="sfImageSanitizer-results-container"></div>


    <!-- ==========================================================================
       JavaScript 파일 로드
       [매우 중요] 스크립트 로드 순서는 각 파일 간의 의존성에 따라 엄격하게 결정됩니다.
       사용되는 클래스는 사용하기 전에 반드시 먼저 정의(로드)되어야 합니다.
       (예: A가 B를 사용한다면, B를 A보다 먼저 로드해야 합니다.)
       ========================================================================== -->

    <!-- 1. 외부 라이브러리 (가장 먼저 로드) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/exif-js/2.3.0/exif.min.js"></script> <!-- sfMetadataAnalyzer.js가 사용 -->

  
    <!-- 4. 메인 컨트롤러 (위의 모든 모듈을 사용하므로 가장 마지막에 로드) -->
    <script src="sfImageSanitizer-max.js"></script>

    <!-- ==========================================================================
       애플리케이션 실행 스크립트 (부트스트래핑)
       ========================================================================== -->
    <script>
        // 'DOMContentLoaded' 이벤트는 브라우저가 HTML 문서를 완전히 읽고 파싱했을 때 발생합니다.
        document.addEventListener('DOMContentLoaded', () => {
        
            // 애플리케이션 전체의 초기 설정을 위한 단일 객체입니다.
            const appOptions = {
                ui: {
                    mainContainerId: '#sfImageSanitizer-container',
                    toolbarContainerId: '#sfImageSanitizer-toolbar-container',
                    resultsContainerId: '#sfImageSanitizer-results-container',
                    dropZoneHeight: '250px',
                },
                logic: {
                    // [신규] 파일 형식 불일치 시 자동으로 변환하여 분석을 계속할지 여부 (기본값: 활성화)
                    autoConvertFormat: true,
                    debugMode: true,
                    deepDebugMode: false
                }
            };

            // 각 UI 컴포넌트를 독립적인 클래스로부터 생성합니다.
            const ui = new sfImageSanitizerUI(appOptions);
            const toolbar = new sfImageSanitizerToolbar(appOptions.ui.toolbarContainerId, appOptions.logic);

            // 메인 컨트롤러(sfImageSanitizer)를 생성할 때, 위에서 만든 ui와 toolbar 객체를
            // 생성자의 인자로 전달합니다. (의존성 주입)
            new sfImageSanitizer(ui, toolbar, appOptions);
        });
    </script>
</body>
</html>